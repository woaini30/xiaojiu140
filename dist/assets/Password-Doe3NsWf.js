import{r as c}from"./request-C4SRpGQ-.js";import{A as _,r as g,c as P,b as r,a as V,w as l,f as a,g as x,p as b,D as f}from"./index-Dku3J1xH.js";const v={class:"card",style:{width:"40%",padding:"50px 50px","background-color":"#ffffff","place-self":"center"}},h={style:{"text-align":"center"}},N={__name:"Password",setup(y){const p=(d,o,s)=>{o?o!==e.form.newPassword?s(new Error("两次输入的密码不一致")):s():s(new Error("请再次确认密码"))},u=()=>{e.form.id=e.user.id,e.form.role=e.user.role,n.value.validate(d=>{d&&c.put("/updatePassword",e.form).then(o=>{o.code==="200"?(f.success("修改成功"),localStorage.removeItem("demo-user"),setTimeout(()=>{location.href="/login"},500)):f.error(o.msg)})})},n=_(),e=g({user:JSON.parse(localStorage.getItem("demo-user")),form:{},rules:{password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPassword:[{validator:p,trigger:"blur"}]}});return(d,o)=>{const s=a("el-input"),m=a("el-form-item"),i=a("el-form"),w=a("el-button");return b(),P("div",v,[r(i,{ref_key:"formRef",ref:n,rules:e.rules,model:e.form,"label-width":"100px",style:{"padding-right":"50px","padding-top":"10px"}},{default:l(()=>[r(m,{label:"原密码",prop:"password"},{default:l(()=>[r(s,{"show-password":"",modelValue:e.form.password,"onUpdate:modelValue":o[0]||(o[0]=t=>e.form.password=t),autocomplete:"off",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),r(m,{label:"新密码",prop:"newPassword"},{default:l(()=>[r(s,{"show-password":"",modelValue:e.form.newPassword,"onUpdate:modelValue":o[1]||(o[1]=t=>e.form.newPassword=t),autocomplete:"off",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),r(m,{label:"确认新密码",prop:"confirmPassword",required:""},{default:l(()=>[r(s,{"show-password":"",modelValue:e.form.confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=t=>e.form.confirmPassword=t),autocomplete:"off",placeholder:"请再次确认新密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),V("div",h,[r(w,{onClick:u,type:"primary",style:{padding:"20px"}},{default:l(()=>[...o[3]||(o[3]=[x("立即修改",-1)])]),_:1})])])}}};export{N as default};
