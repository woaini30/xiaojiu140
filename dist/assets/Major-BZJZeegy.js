import{r as M,A as $,c as q,a as p,b as o,w as a,f as s,u as c,v as A,g as m,B as J,C as O,E as b,D as i,p as P}from"./index-Dku3J1xH.js";import{r as u}from"./request-C4SRpGQ-.js";const R={class:"card",style:{"margin-bottom":"5px"}},I={class:"card",style:{"margin-bottom":"5px"}},T={class:"card",style:{"margin-bottom":"5px"}},F={style:{"margin-top":"10px"}},G={class:"dialog-footer"},Q={__name:"Major",setup(H){const e=M({name:null,tableData:[],pageNum:1,pageSize:5,total:0,no:null,formVisible:!1,form:{},ids:[],rules:{major:[{required:!0,message:"请输入专业",trigger:"blur"}]}}),g=$(),r=()=>{u.get("/major/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(l=>{console.log(),e.tableData=l.data.list,e.total=l.data.total})};r();const y=()=>{e.name=null,r()},V=()=>{e.formVisible=!0,e.form={}},C=()=>{g.value.validate(l=>{l&&(e.form.id?x():v())})},v=()=>{u.post("/major/add",e.form).then(l=>{l.code==="200"?(e.formVisible=!1,i.success("新增成功"),r()):i.error(l.msg)})},x=l=>{u.put("/major/update",e.form).then(t=>{t.code==="200"?(e.formVisible=!1,i.success("更新成功"),r()):i.error(t.msg)})},k=l=>{e.form=JSON.parse(JSON.stringify(l)),e.formVisible=!0},h=l=>{b.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(()=>{u.delete("/major/deleteById/"+l).then(t=>{t.code==="200"?(i.success("单个删除成功"),r()):i.error(t.msg)})}).catch()},w=l=>{console.log(l),e.ids=l.map(t=>t.id),console.log(e.ids)},z=()=>{if(e.ids.length===0){i.warning("请选择数据");return}b.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(()=>{u.delete("/major/deleteBatch",{data:e.ids}).then(l=>{l.code==="200"?(i.success("批量删除成功"),r()):i.error(l.msg)})}).catch()};return(l,t)=>{const S=s("el-icon"),_=s("el-input"),d=s("el-button"),f=s("el-table-column"),N=s("el-table"),j=s("el-pagination"),B=s("el-form-item"),U=s("el-form"),D=s("el-dialog");return P(),q("div",null,[p("div",R,[o(_,{style:{width:"240px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.name=n),placeholder:"请输入专业查询"},{prefix:a(()=>[o(S,null,{default:a(()=>[o(c(A))]),_:1})]),_:1},8,["modelValue"]),o(d,{type:"primary",onClick:r},{default:a(()=>[...t[6]||(t[6]=[m("查 询",-1)])]),_:1}),o(d,{type:"warning",onClick:y},{default:a(()=>[...t[7]||(t[7]=[m("重 置",-1)])]),_:1})]),p("div",I,[o(d,{type:"primary",onClick:V},{default:a(()=>[...t[8]||(t[8]=[m("新 增",-1)])]),_:1}),o(d,{type:"danger",onClick:z},{default:a(()=>[...t[9]||(t[9]=[m("批量删除",-1)])]),_:1})]),p("div",T,[o(N,{data:e.tableData,stripe:"",onSelectionChange:w},{default:a(()=>[o(f,{type:"selection",width:"60"}),o(f,{label:"专业",prop:"name"}),o(f,{label:"操作"},{default:a(n=>[o(d,{onClick:E=>k(n.row),type:"primary",icon:c(J),circle:""},null,8,["onClick","icon"]),o(d,{onClick:E=>h(n.row.id),type:"primary",icon:c(O),circle:"",color:"red"},null,8,["onClick","icon"])]),_:1})]),_:1},8,["data"]),p("div",F,[o(j,{onSizeChange:r,onCurrentChange:r,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=n=>e.pageNum=n),"page-size":e.pageSize,"onUpdate:pageSize":t[2]||(t[2]=n=>e.pageSize=n),"page-sizes":[5,10,15,20],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["current-page","page-size","total"])])]),o(D,{title:"专业信息",modelValue:e.formVisible,"onUpdate:modelValue":t[5]||(t[5]=n=>e.formVisible=n),width:"500","destroy-on-close":""},{footer:a(()=>[p("div",G,[o(d,{onClick:t[4]||(t[4]=n=>e.formVisible=!1)},{default:a(()=>[...t[10]||(t[10]=[m("取消",-1)])]),_:1}),o(d,{type:"primary",onClick:C},{default:a(()=>[...t[11]||(t[11]=[m("保存",-1)])]),_:1})])]),default:a(()=>[o(U,{ref_key:"formRef",ref:g,rules:e.rules,model:e.form,"label-width":"80px",style:{"padding-right":"50px","padding-top":"10px"}},{default:a(()=>[o(B,{label:"专业",prop:"name"},{default:a(()=>[o(_,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=n=>e.form.name=n),autocomplete:"off",placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{Q as default};
